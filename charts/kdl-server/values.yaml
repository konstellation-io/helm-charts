# Default values for kdl-server
# This is a YAML-formatted file
# Declare variables to be passed into your templates

global:
  # -- Specifies the registry to pull images from. Leave empty for the default registry
  imageRegistry: ""

  # -- Specifies the secrets to use for pulling images from private registries
  # Leave empty if no secrets are required
  # E.g.
  # imagePullSecrets:
  #   - name: myRegistryKeySecretName
  imagePullSecrets: []

  # -- The DNS domain name that will serve the application
  domain: kdl.local

  # -- KDL Server instance name
  serverName: "local-server"

  # -- Enable HTTPs
  # Use to enable or disable HTTPS on the endpoints
  enableHttps: true

  # -- Environment variables to configure application
  env: {}
    # MY_VARIABLE: value

  # -- Variables from secrets
  envFromSecrets: {}
    # MY_VARIABLE:
    #   name: <name-secret>
    #   key: secret_key

  # -- Variables from configMap
  envFromConfigMap: {}
    # MY_VARIABLE:
    #   name: <name-configmap>
    #   key: key

  # -- Load all variables from files
  # </br> Ref: https://kubernetes.io/docs/tasks/configure-pod-container/configure-pod-configmap/#configure-all-key-value-pairs-in-a-configmap-as-container-environment-variables
  envFromFiles: []
    # - secretRef:
    #     name: <name-secret>
    # - configMapRef:
    #     name: <name-configmap>

# -- String to partially override kdl-server.fullname template (will maintain the release name)
nameOverride: ""

# -- String to fully override kdl-server.fullname template
fullnameOverride: ""

# -- Number of replicas
# Specifies the number of replicas for the service
replicaCount: 1

# -- Image registry
# The image configuration for the base service
image:
  # The repository of the image
  repository: konstellation/kdl-server
  # The pull policy for the image
  pullPolicy: IfNotPresent
  # The image tag
  tag: "1.41.0"

# -- Specifies the secrets to use for pulling images from private registries
# Leave empty if no secrets are required
# E.g.
# imagePullSecrets:
#   - name: myRegistryKeySecretName
imagePullSecrets: []

# -- Enable creation of ServiceAccount
# </br> Ref: https://kubernetes.io/docs/concepts/security/service-accounts/
serviceAccount:
  # Specifies whether a service account should be created
  create: true
  # Automatically mount a ServiceAccount's API credentials?
  automount: true
  # Annotations to add to the service account
  annotations: {}
  # The name of the service account to use
  # If not set and create is true, a name is generated using the fullname template
  name: ""

# -- Creation of resources RBAC
# </br> Ref: https://kubernetes.io/docs/reference/access-authn-authz/rbac/
rbac:
  # Specifies whether RBAC resources should be created
  create: true

# -- Enable or disable test connection
testConnection:
  # Specifies whether a test connection should be created
  enabled: false
  # The repository of the image
  repository: busybox
  # Overrides the image tag
  tag: "latest"

# -- Environment variables to configure application
# </br> Ref: https://github.com/konstellation-io/kdl-server/tree/main/app/api
env: {}
  # MINIO_ENDPOINT: test
  # KUBECONFIG_DOWNLOAD_ENABLED: "" # required
  # KUBECONFIG_EXTERNAL_SERVER_URL: "" # required

# -- Variables from secrets
envFromSecrets: {}
  # MY_VARIABLE:
  #   name: <name-secret>
  #   key: secret_key

# -- Variables from configMap
envFromConfigMap: {}
  # MY_VARIABLE:
  #   name: <name-configmap>
  #   key: key

# -- Load all variables from files
# </br> Ref: https://kubernetes.io/docs/tasks/configure-pod-container/configure-pod-configmap/#configure-all-key-value-pairs-in-a-configmap-as-container-environment-variables
envFromFiles: []
  # - secretRef:
  #     name: <name-secret>
  # - configMapRef:
  #     name: <name-configmap>

# -- Secrets values to create credentials and reference by envFromSecrets
# Generate Secret with following name: <release-name>-<name>
# </br> Ref: https://kubernetes.io/docs/concepts/configuration/secret/
secrets: []
  # - name: secret-name
  #   data:
  #     my.key: |-
  #       my-content
  #     my_var: my-value

# -- Configure extra containers
extraContainers: []
  # - name: project-proxy
  #   image: nginx:alpine
  #   command: ['sh', '-c', 'echo "Hello, World!"']

# -- Configure additional containers
# </br> Ref: https://kubernetes.io/docs/concepts/workloads/pods/init-containers/
initContainers: []
  # - name: my-container
  #   image: busybox
  #   command: ['sh', '-c', 'echo "Hello, World!"']

# -- Configure args
# </br> Ref: https://kubernetes.io/docs/tasks/inject-data-application/define-command-argument-container/
args: []
  # - -c
  # - echo "Hello, World!"

# -- Configure command
# </br> Ref: https://kubernetes.io/docs/tasks/inject-data-application/define-command-argument-container/
command: []
  # - echo
  # - "Hello, World!"

# -- Kubernetes service to expose Pod
# </br> Ref: https://kubernetes.io/docs/concepts/services-networking/service/
service:
  # -- Kubernetes Service type. Allowed values: NodePort, LoadBalancer or ClusterIP
  type: ClusterIP
  # -- Kubernetes Service port
  port: 80
  # -- Kubernetes Service health check path
  # healthPath: ""
  # -- NodePort port (only when type is NodePort)
  # nodePort: 32000
  # -- Pod expose port
  # targetPort: 8080
  # -- Pod extra ports
  # extraPorts:
  # - name: metrics
  #   port: 9080
  #   targetPort: 9080

# -- Ingress configuration to expose app
# </br> Ref: https://kubernetes.io/docs/concepts/services-networking/ingress/
ingress:
  enabled: false
  className: ""
  annotations: {}
    # cert-manager.io/issuer: your-issuer
    # kubernetes.io/ingress.class: nginx
    # kubernetes.io/tls-acme: "true"

    # This Chart has been developed using Nginx Ingress Controller by default.
    # Using the following default annotations ensures its correct operation.
    # Ref: https://kubernetes.github.io/ingress-nginx/
    #
    #nginx.ingress.kubernetes.io/proxy-read-timeout: "3600"
    #nginx.ingress.kubernetes.io/proxy-send-timeout: "3600"
    #nginx.ingress.kubernetes.io/proxy-connect-timeout: "3600"

    # Large values are needed here to serve big files from Filebrowser
    #
    # nginx.ingress.kubernetes.io/proxy-body-size: "1000000m"
  hosts:
  - host: chart-example.local
    paths:
    - path: /
      pathType: ImplementationSpecific
  tls: []
  #  - secretName: chart-example-tls
  #    hosts:
  #    - chart-example.local

# -- NetworkPolicy configuration
# </br> Ref: https://kubernetes.io/docs/concepts/services-networking/network-policies/
networkPolicy:
  # -- Enable or disable NetworkPolicy
  enabled: false
  # -- Policy types
  policyTypes: []
    # - Ingress
    # - Egress
  ingress: []
    # - from:
    #   - ipBlock:
    #       cidr: 172.17.0.0/16
    #       except:
    #       - 172.17.1.0/24
    #   - namespaceSelector:
    #       matchLabels:
    #         project: myproject
    #   - podSelector:
    #       matchLabels:
    #         role: frontend
    #   ports:
    #   - protocol: TCP
    #     port: 6379
  egress: []
    # - to:
    #   - ipBlock:
    #       cidr: 10.0.0.0/24
    #   ports:
    #   - protocol: TCP
    #     port: 5978

# -- Configure lifecycle hooks
# </br> Ref: https://kubernetes.io/docs/concepts/containers/container-lifecycle-hooks/
# </br> Ref: https://learnk8s.io/graceful-shutdown
lifecycle: {}
  # preStop:
  #   exec:
  #     command: ["sh", "-c", "sleep 10"]
  # postStart:
  #   exec:
  #     command:
  #       - "/bin/sh"
  #       - "-c"
  #       - "ssh-keyscan -H keycloak >> /app/.ssh/known_hosts"

# -- Configure Pod termination grace period
# </br> Ref: https://kubernetes.io/docs/concepts/workloads/pods/pod-lifecycle/#pod-termination
terminationGracePeriodSeconds: 30

# -- Configure liveness checker
# </br> Ref: https://kubernetes.io/docs/tasks/configure-pod-container/configure-liveness-readiness-startup-probes/#define-startup-probes
livenessProbe:
  enabled: false
  failureThreshold: 3
  initialDelaySeconds: 180
  periodSeconds: 10
  successThreshold: 1
  timeoutSeconds: 5

# -- Custom livenessProbe
livenessProbeCustom: {}
  # httpGet:
  #   path: /dashboard
  #   port: 4000
  # failureThreshold: 3
  # initialDelaySeconds: 200
  # periodSeconds: 30
  # successThreshold: 1
  # timeoutSeconds: 5

# -- Configure readinessProbe checker
# </br> Ref: https://kubernetes.io/docs/tasks/configure-pod-container/configure-liveness-readiness-startup-probes/#define-startup-probes
readinessProbe:
  enabled: false
  failureThreshold: 3
  initialDelaySeconds: 10
  periodSeconds: 10
  successThreshold: 1
  timeoutSeconds: 1

# -- Custom readinessProbe
readinessProbeCustom: {}
  # httpGet:
  #   path: /dashboard
  #   port: 4000
  # failureThreshold: 3
  # initialDelaySeconds: 200
  # periodSeconds: 30
  # successThreshold: 1
  # timeoutSeconds: 5

# -- Configure startupProbe checker
# </br> Ref: https://kubernetes.io/docs/tasks/configure-pod-container/configure-liveness-readiness-startup-probes/#define-startup-probes
startupProbe:
  enabled: false
  failureThreshold: 30
  initialDelaySeconds: 180
  periodSeconds: 10
  successThreshold: 1
  timeoutSeconds: 5

# -- Custom startupProbe
startupProbeCustom: {}
  # httpGet:
  #   path: /dashboard
  #   port: 4000
  # failureThreshold: 3
  # initialDelaySeconds: 200
  # periodSeconds: 30
  # successThreshold: 1
  # timeoutSeconds: 5

# -- Check if dependencies are ready
readyChecker:
  # -- Enable or disable ready-checker
  enabled: false
  # -- Repository of the image
  repository: busybox
  # -- Pull policy for the image
  pullPolicy: IfNotPresent
  # -- Overrides the image tag
  tag: "latest"
  # -- Number of retries before giving up
  retries: 30
  # -- Timeout for each check
  timeout: 5
  # -- List services
  services:
  - name: mongodb
    port: 27017
  - name: keycloak
    port: 80

# -- Enable ServiceMonitor to get metrics
# </br> Ref: https://github.com/prometheus-operator/prometheus-operator/blob/main/Documentation/api.md#servicemonitor
serviceMonitor:
  # -- Enable or disable
  enabled: false
  interval: 30s
  scrapeTimeout: 10s
  metricRelabelings: []
  relabelings: []

# -- Configure annotations on Pods
podAnnotations: {}

# -- Configure labels on Pods
podLabels: {}

# -- Defines privilege and access control settings for a Pod
# </br> Ref: https://kubernetes.io/docs/concepts/security/pod-security-standards/
# </br> Ref: https://kubernetes.io/docs/tasks/configure-pod-container/security-context/
podSecurityContext: {}
  # fsGroup: 2000

# -- Defines privilege and access control settings for a Container
# </br> Ref: https://kubernetes.io/docs/concepts/security/pod-security-standards/
# </br> Ref: https://kubernetes.io/docs/tasks/configure-pod-container/security-context/
securityContext: {}
  # capabilities:
  #   drop:
  #   - ALL
  # readOnlyRootFilesystem: true
  # runAsNonRoot: true
  # runAsUser: 1000

# -- Resources limits and requested
# </br> Ref: https://kubernetes.io/docs/concepts/configuration/manage-resources-containers/
resources: {}
  # limits:
  #   cpu: 100m
  #   memory: 128Mi
  # requests:
  #   cpu: 100m
  #   memory: 128Mi

# -- Pod Disruption Budget
# </br> Ref: https://kubernetes.io/docs/reference/kubernetes-api/policy-resources/pod-disruption-budget-v1/
podDisruptionBudget:
  enabled: false
  maxUnavailable: 1
  minAvailable:

# -- Autoscaling with CPU or memory utilization percentage
# </br> Ref: https://kubernetes.io/docs/tasks/run-application/horizontal-pod-autoscale/
autoscaling:
  enabled: false
  minReplicas: 1
  maxReplicas: 100
  targetCPUUtilizationPercentage: 80
  # targetMemoryUtilizationPercentage: 80

# -- Additional volumes on the output Deployment definition
# </br> Ref: https://kubernetes.io/docs/concepts/storage/volumes/
# </br> Ref: https://kubernetes.io/docs/tasks/configure-pod-container/configure-pod-configmap/
# </br> Ref: https://kubernetes.io/docs/tasks/inject-data-application/distribute-credentials-secure/#create-a-pod-that-has-access-to-the-secret-data-through-a-volume
volumes: []
# - name: foo
#   secret:
#     secretName: mysecret
#     optional: false

# -- Additional volumeMounts on the output Deployment definition
volumeMounts: []
# - name: foo
#   mountPath: "/etc/foo"
#   readOnly: true

# -- Node labels for pod assignment
# </br> Ref: https://kubernetes.io/docs/concepts/scheduling-eviction/assign-pod-node/#nodeselector
nodeSelector: {}

# -- Tolerations for pod assignment
# </br> Ref: https://kubernetes.io/docs/concepts/scheduling-eviction/taint-and-toleration/
tolerations: []

# -- Affinity for pod assignment
# </br> Ref: https://kubernetes.io/docs/concepts/scheduling-eviction/assign-pod-node/#affinity-and-anti-affinity
affinity: {}

# -- Control how Pods are spread across your cluster
# </br> Ref: https://kubernetes.io/docs/concepts/scheduling-eviction/topology-spread-constraints/#example-multiple-topologyspreadconstraints
topologySpreadConstraints: []
# - maxSkew: 1
#   topologyKey: zone
#   whenUnsatisfiable: DoNotSchedule

# -- Keycloak subchart deployment
# </br> Ref: https://github.com/konstellation-io/helm-charts/blob/kdl-server-1.0.2/charts/kdl-server/values.yaml
keycloak:
  # -- Enable or disable Keycloak subchart
  enabled: false

  # Force keycloak name
  fullnameOverride: keycloak

  # Image registry
  # The image configuration for the base service
  image:
    repository: keycloak/keycloak
    tag: "26.0"

  # Kubernetes service to expose Pod
  # </br> Ref: https://kubernetes.io/docs/concepts/services-networking/service/
  service:
    healthPath: /realms/master
    targetPort: 8080

  # Ingress configuration to expose app
  # </br> Ref: https://kubernetes.io/docs/concepts/services-networking/ingress/
  ingress:
    enabled: true
    className: ""
    annotations: {}
      # nginx.org/proxy-buffer-size: "128k"
      # nginx.org/proxy-buffers: "8 256k"
    hosts:
    - host: keycloak.mydomain.com
      paths:
      - path: /
        pathType: ImplementationSpecific

  # Enable creation of ServiceAccount
  # </br> Ref: https://kubernetes.io/docs/concepts/security/service-accounts/
  serviceAccount:
    create: true

  # Configure liveness checker
  # </br> Ref: https://kubernetes.io/docs/tasks/configure-pod-container/configure-liveness-readiness-startup-probes/#define-startup-probes
  livenessProbe:
    enabled: true

  # Configure readinessProbe checker
  # </br> Ref: https://kubernetes.io/docs/tasks/configure-pod-container/configure-liveness-readiness-startup-probes/#define-startup-probes
  readinessProbe:
    enabled: true
    httpGet:
      path: /realms/master

  # Configure command
  # </br> Ref: https://kubernetes.io/docs/tasks/inject-data-application/define-command-argument-container/
  command: []
  # - "/opt/keycloak/bin/kc.sh"
  # - "start-dev"

  # Environment variables to configure application
  # </br> Ref: https://www.keycloak.org/server/configuration
  env: {}
    # KC_DB_PASSWORD: keycloak
    # KC_DB_URL: jdbc:postgresql://postgresql:5432/keycloak
    # KC_DB_USERNAME: keycloak
    # KC_DB: postgres
    # KC_HEALTH_ENABLED: true
    # KC_HOSTNAME: keycloak.mydomain.com
    # KC_METRICS_ENABLED: true
    # KC_PROXY: edge
    # KEYCLOAK_ADMIN_PASSWORD: keycloak
    # KEYCLOAK_ADMIN: keycloak

# -- knowledge-galaxy deployment
# </br> Ref: https://github.com/konstellation-io/knowledge-galaxy
knowledgeGalaxy:
  # -- Whether to enable Knowledge Galaxy
  enabled: false

  # -- Image registry
  # The image configuration for the base service
  image:
    # The repository of the image
    repository: konstellation/knowledge-galaxy
    # The pull policy for the image
    pullPolicy: IfNotPresent
    # The image tag
    tag: "v1.2.1"

  # -- Specifies the secrets to use for pulling images from private registries
  # Leave empty if no secrets are required
  # E.g.
  # imagePullSecrets:
  #   - name: myRegistryKeySecretName
  imagePullSecrets: []

  # -- Configuration
  # TODO: legacy backard compatibility, remove in future versions
  config:
    # -- Log level
    logLevel: "INFO"
    # -- Number of threads for the server
    workers: 1
    # -- Number of outputs that the recommender returns
    numberOfOutputs: 1000
    # -- Minimum number of words to use for project description
    descriptionMinWords: 50

  # -- Enable creation of ServiceAccount
  # </br> Ref: https://kubernetes.io/docs/concepts/security/service-accounts/
  serviceAccount:
    # Specifies whether a service account should be created
    create: true
    # Automatically mount a ServiceAccount's API credentials?
    automount: true
    # Annotations to add to the service account
    annotations: {}
    # The name of the service account to use
    # If not set and create is true, a name is generated using the fullname template
    name: ""

  # -- Environment variables to configure application
  # Ref: https://github.com/konstellation-io/knowledge-galaxy?tab=readme-ov-file#environment-variables
  env: {}
    # DESCRIPTION_MIN_WORDS: 50
    # HOST: "0.0.0.0"
    # LOG_LEVEL: "INFO"
    # N_HITS: 1000
    # SERVER_MONGODB_URI: mongodb://mongodb:27017
    # SERVER_PORT: 8080
    # STANDALONE_MODE: "false"
    # WORKERS: "1"

  # -- Variables from secrets
  envFromSecrets: {}
    # MY_VARIABLE:
    #   name: <name-secret>
    #   key: secret_key

  # -- Variables from configMap
  envFromConfigMap: {}
    # MY_VARIABLE:
    #   name: <name-configmap>
    #   key: key

  # -- Load all variables from files
  # </br> Ref: https://kubernetes.io/docs/tasks/configure-pod-container/configure-pod-configmap/#configure-all-key-value-pairs-in-a-configmap-as-container-environment-variables
  envFromFiles: []
    # - secretRef:
    #     name: <name-secret>
    # - configMapRef:
    #     name: <name-configmap>

  # -- Secrets values to create credentials and reference by envFromSecrets
  # Generate Secret with following name: <release-name>-<name>
  # </br> Ref: https://kubernetes.io/docs/concepts/configuration/secret/
  secrets: []
    # - name: secret-name
    #   data:
    #     my.key: |-
    #       my-content
    #     my_var: my-value

  # -- Configure additional containers
  # </br> Ref: https://kubernetes.io/docs/concepts/workloads/pods/init-containers/
  initContainers: []
    # - name: my-container
    #   image: busybox
    #   command: ['sh', '-c', 'echo "Hello, World!"']

  # -- Configure args
  # </br> Ref: https://kubernetes.io/docs/tasks/inject-data-application/define-command-argument-container/
  args: []
    # - -c
    # - echo "Hello, World!"

  # -- Configure command
  # </br> Ref: https://kubernetes.io/docs/tasks/inject-data-application/define-command-argument-container/
  command: []
    # - echo
    # - "Hello, World!"

  # -- Kubernetes service to expose Pod
  # </br> Ref: https://kubernetes.io/docs/concepts/services-networking/service/
  service:
    # -- Kubernetes Service type. Allowed values: NodePort, LoadBalancer or ClusterIP
    type: ClusterIP
    # -- Kubernetes Service port
    port: 80
    # -- Kubernetes Service health check path
    # healthPath: ""
    # -- NodePort port (only when type is NodePort)
    # nodePort: 32000
    # -- Pod expose port
    targetPort: 8080
    # -- Pod extra ports
    # extraPorts:
    # - name: metrics
    #   port: 9080
    #   targetPort: 9080

  # -- NetworkPolicy configuration
  # </br> Ref: https://kubernetes.io/docs/concepts/services-networking/network-policies/
  networkPolicy:
    # -- Enable or disable NetworkPolicy
    enabled: false
    # -- Policy types
    policyTypes: []
      # - Ingress
      # - Egress
    ingress: []
      # - from:
      #   - ipBlock:
      #       cidr: 172.17.0.0/16
      #       except:
      #       - 172.17.1.0/24
      #   - namespaceSelector:
      #       matchLabels:
      #         project: myproject
      #   - podSelector:
      #       matchLabels:
      #         role: frontend
      #   ports:
      #   - protocol: TCP
      #     port: 6379
    egress: []
      # - to:
      #   - ipBlock:
      #       cidr: 10.0.0.0/24
      #   ports:
      #   - protocol: TCP
      #     port: 5978

  # -- Configure lifecycle hooks
  # </br> Ref: https://kubernetes.io/docs/concepts/containers/container-lifecycle-hooks/
  # </br> Ref: https://learnk8s.io/graceful-shutdown
  lifecycle: {}
    # preStop:
    #   exec:
    #     command: ["sh", "-c", "sleep 10"]

  # -- Configure Pod termination grace period
  # </br> Ref: https://kubernetes.io/docs/concepts/workloads/pods/pod-lifecycle/#pod-termination
  terminationGracePeriodSeconds: 30

  # -- Configure liveness checker
  # </br> Ref: https://kubernetes.io/docs/tasks/configure-pod-container/configure-liveness-readiness-startup-probes/#define-startup-probes
  livenessProbe:
    enabled: false
    failureThreshold: 3
    initialDelaySeconds: 180
    periodSeconds: 10
    successThreshold: 1
    timeoutSeconds: 5

  # -- Custom livenessProbe
  livenessProbeCustom: {}
    # httpGet:
    #   path: /dashboard
    #   port: 4000
    # failureThreshold: 3
    # initialDelaySeconds: 200
    # periodSeconds: 30
    # successThreshold: 1
    # timeoutSeconds: 5

  # -- Configure readinessProbe checker
  # </br> Ref: https://kubernetes.io/docs/tasks/configure-pod-container/configure-liveness-readiness-startup-probes/#define-startup-probes
  readinessProbe:
    enabled: false
    failureThreshold: 3
    initialDelaySeconds: 10
    periodSeconds: 10
    successThreshold: 1
    timeoutSeconds: 1

  # -- Custom readinessProbe
  readinessProbeCustom: {}
    # httpGet:
    #   path: /dashboard
    #   port: 4000
    # failureThreshold: 3
    # initialDelaySeconds: 200
    # periodSeconds: 30
    # successThreshold: 1
    # timeoutSeconds: 5

  # -- Configure startupProbe checker
  # </br> Ref: https://kubernetes.io/docs/tasks/configure-pod-container/configure-liveness-readiness-startup-probes/#define-startup-probes
  startupProbe:
    enabled: false
    failureThreshold: 30
    initialDelaySeconds: 180
    periodSeconds: 10
    successThreshold: 1
    timeoutSeconds: 5

  # -- Custom startupProbe
  startupProbeCustom: {}
    # httpGet:
    #   path: /dashboard
    #   port: 4000
    # failureThreshold: 3
    # initialDelaySeconds: 200
    # periodSeconds: 30
    # successThreshold: 1
    # timeoutSeconds: 5

  # -- Configure annotations on Pods
  podAnnotations: {}

  # -- Configure labels on Pods
  podLabels: {}

  # -- Defines privilege and access control settings for a Pod
  # </br> Ref: https://kubernetes.io/docs/concepts/security/pod-security-standards/
  # </br> Ref: https://kubernetes.io/docs/tasks/configure-pod-container/security-context/
  podSecurityContext: {}
    # fsGroup: 2000

  # -- Defines privilege and access control settings for a Container
  # </br> Ref: https://kubernetes.io/docs/concepts/security/pod-security-standards/
  # </br> Ref: https://kubernetes.io/docs/tasks/configure-pod-container/security-context/
  securityContext: {}
    # capabilities:
    #   drop:
    #   - ALL
    # readOnlyRootFilesystem: true
    # runAsNonRoot: true
    # runAsUser: 1000

  # -- Resources limits and requested
  # </br> Ref: https://kubernetes.io/docs/concepts/configuration/manage-resources-containers/
  resources: {}
    # limits:
    #   cpu: 100m
    #   memory: 128Mi
    # requests:
    #   cpu: 100m
    #   memory: 128Mi

  # -- Pod Disruption Budget
  # </br> Ref: https://kubernetes.io/docs/reference/kubernetes-api/policy-resources/pod-disruption-budget-v1/
  podDisruptionBudget:
    enabled: false
    maxUnavailable: 1
    minAvailable:

  # -- Autoscaling with CPU or memory utilization percentage
  # </br> Ref: https://kubernetes.io/docs/tasks/run-application/horizontal-pod-autoscale/
  autoscaling:
    enabled: false
    minReplicas: 1
    maxReplicas: 100
    targetCPUUtilizationPercentage: 80
    # targetMemoryUtilizationPercentage: 80

  # -- Additional volumes on the output Deployment definition
  # </br> Ref: https://kubernetes.io/docs/concepts/storage/volumes/
  # </br> Ref: https://kubernetes.io/docs/tasks/configure-pod-container/configure-pod-configmap/
  # </br> Ref: https://kubernetes.io/docs/tasks/inject-data-application/distribute-credentials-secure/#create-a-pod-that-has-access-to-the-secret-data-through-a-volume
  volumes: []
  # - name: foo
  #   secret:
  #     secretName: mysecret
  #     optional: false

  # -- Additional volumeMounts on the output Deployment definition
  volumeMounts: []
  # - name: foo
  #   mountPath: "/etc/foo"
  #   readOnly: true

  # -- Node labels for pod assignment
  # </br> Ref: https://kubernetes.io/docs/concepts/scheduling-eviction/assign-pod-node/#nodeselector
  nodeSelector: {}

  # -- Tolerations for pod assignment
  # </br> Ref: https://kubernetes.io/docs/concepts/scheduling-eviction/taint-and-toleration/
  tolerations: []

  # -- Affinity for pod assignment
  # </br> Ref: https://kubernetes.io/docs/concepts/scheduling-eviction/assign-pod-node/#affinity-and-anti-affinity
  affinity: {}

  # -- Control how Pods are spread across your cluster
  # </br> Ref: https://kubernetes.io/docs/concepts/scheduling-eviction/topology-spread-constraints/#example-multiple-topologyspreadconstraints
  topologySpreadConstraints: []
  # - maxSkew: 1
  #   topologyKey: zone
  #   whenUnsatisfiable: DoNotSchedule

# -- MinIO subchart deployment
# </br> Ref: https://github.com/minio/minio/blob/RELEASE.2021-10-13T00-23-17Z/helm/minio/values.yaml
minio:
  # -- Enable or disable MinIO subchart
  enabled: false

  # mode MinIO server mode (`standalone` or `distributed`)
  # </br> Ref: https://docs.minio.io/docs/distributed-minio-quickstart-guide
  mode: standalone

  # MinIO authentication parameters
  # MinIO root username
  rootUser: ChangeMe
  # Password for MinIO root user
  rootPassword: ChangeMe

  # Enable persistence using Persistent Volume Claims
  # </br> Ref: https://kubernetes.io/docs/user-guide/persistent-volumes/
  persistence:
    # Enable MinIO data persistence using PVC. If false, use emptyDir
    enabled: false

# -- MongoDB subchart deployment
# </br> Ref: https://github.com/bitnami/charts/blob/main/bitnami/mongodb/values.yaml
mongodb:
  # -- Enable or disable MongoDB subchart
  enabled: false

  # mode MongoDB server mode (`standalone` or `replicaset`)
  architecture: standalone

  # MongoDB authentication parameters
  auth:
    # MongoDB root username
    rootUser: ChangeMe
    # Password for MongoDB root user
    rootPassword: ChangeMe

  # Enable persistence using Persistent Volume Claims
  # </br> Ref: https://kubernetes.io/docs/user-guide/persistent-volumes/
  persistence:
    # Enable MongoDB data persistence using PVC. If false, use emptyDir
    enabled: false

# -- OAuth2-Proxy subchart deployment
# </br> Ref: https://github.com/oauth2-proxy/manifests/blob/main/helm/oauth2-proxy/values.yaml
oauth2proxy:
  # -- Enable or disable OAuth2-Proxy subchart
  enabled: false

  # whether to use http or https
  httpScheme: http
  # OAuth client ID
  clientID: "XXXXXXX"
  # OAuth client secret
  clientSecret: "XXXXXXXX"
  # Create a new secret with the following command
  # openssl rand -base64 32 | head -c 32 | base64
  # Use an existing secret for OAuth2 credentials (see secret.yaml for required fields)
  # Example:
  # existingSecret: secret
  cookieSecret: "XXXXXXXXXXXXXXXX"
  # The name of the cookie that oauth2-proxy will create
  # If left empty, it will default to the release name
  cookieName: ""
  # Ref: https://oauth2-proxy.github.io/oauth2-proxy/configuration/overview#config-options
  # Ref: https://github.com/oauth2-proxy/oauth2-proxy/blob/master/contrib/oauth2-proxy.cfg.example
  # Ref: https://oauth2-proxy.github.io/oauth2-proxy/configuration/providers/keycloak_oidc
  # configFile: |-
  #   provider = "keycloak-oidc"
  #   client_id = "oauth2-proxy"
  #   client_secret = "XXXXXXXX"
  #   redirect_url = "https://domain.com/oauth2/callback"
  #   oidc_issuer_url = "https://keycloak.svc/realms/<realm>"
  #   email_domains = ["domain.com"]
  #   code_challenge_method = "S256"
  #   skip_provider_button = true
  #   pass_user_headers = true
  #   upstreams = [
  #     "http://127.0.0.1:8080/",
  #     "http://127.0.0.1:9000/mlflow/",
  #     "http://127.0.0.1:9000/filebrowser/",
  #     "http://127.0.0.1:9000/kg/"
  #   ]
  #   skip_auth_routes = ["/config.json"]
  #   cookie_secret = "XXXXXXXX"
  #   cookie_secure = true
  #   cookie_httponly = true

  extraContainers: []
    #  - name: project-proxy
    #    image: nginx:alpine
    #    ports:
    #      - containerPort: 9000
    #    volumeMounts:
    #      - name: project-proxy-nginx-config
    #        mountPath: /etc/nginx/nginx.conf
    #        subPath: nginx.conf

  extraVolumes: []
    # - name: project-proxy-nginx-config
    #   configMap:
    #     name: project-proxy-nginx-config

  extraVolumeMounts: []
    # - name: project-proxy-nginx-config
    #   mountPath: /etc/nginx/nginx.conf
    #   subPath: nginx.conf

  extraObjects: []
    # Ref: https://oauth2-proxy.github.io/oauth2-proxy/configuration/integration
    # - apiVersion: v1
    #   kind: ConfigMap
    #   metadata:
    #     name: project-proxy-nginx-config
    #   data:
    #     nginx.conf: |
    #       user  nginx;
    #       worker_processes  1;
    #       error_log  /var/log/nginx/error.log warn;
    #       pid        /var/run/nginx.pid;
    #       events {
    #           worker_connections  1024;
    #       }
    #       http {
    #         include       /etc/nginx/mime.types;
    #         default_type  application/octet-stream;
    #         log_format  main  '$remote_addr - $remote_user [$time_local] "$request" '
    #                             '$status $body_bytes_sent "$http_referer" '
    #                             '"$http_user_agent" "$http_x_forwarded_for"';
    #         access_log  /var/log/nginx/access.log  main;
    #         sendfile        on;
    #         keepalive_timeout  65;
    #
    #         server {
    #           listen 9000;
    #           resolver kube-dns.kube-system.svc.cluster.local valid=5s;
    #           client_max_body_size 1000000M;
    #
    #           location = /auth {
    #               internal;
    #               proxy_pass              http://127.0.0.1:8080/api/auth/project;
    #               proxy_pass_request_body off;
    #               proxy_set_header        Content-Length "";
    #               proxy_set_header        X-Original-URI $request_uri;
    #           }
    #
    #           location ~ ^/mlflow/([^/]+)/(.*)$ {
    #               auth_request /auth;
    #               auth_request_set $auth_status $upstream_status;
    #               proxy_pass http://$1-mlflow.kdl.svc.cluster.local:5000/$2$is_args$args;
    #           }
    #
    #           location ~ ^/filebrowser/([^/]+)/(.*)$ {
    #               auth_request /auth;
    #               auth_request_set $auth_status $upstream_status;
    #               set $query $2;
    #               proxy_pass http://$1-filebrowser.kdl.svc.cluster.local:9696/$query$is_args$args;
    #           }
    #
    #           location ~ ^/kg/(api|static)/(.*)$ {
    #               proxy_pass http://knowledge-galaxy.kdl.svc.cluster.local:8080/kg/$1/$2$is_args$args;
    #           }
    #
    #           location ~ ^/kg/(favicon.ico|config.json)$ {
    #               proxy_pass http://knowledge-galaxy.kdl.svc.cluster.local:8080/kg/$1;
    #           }
    #
    #           location ~ ^/kg/(.*)$ {
    #               auth_request /auth;
    #               auth_request_set $auth_status $upstream_status;
    #               proxy_pass http://knowledge-galaxy.kdl.svc.cluster.local:8080/kg/$1$is_args$args;
    #           }
    #         }
    #       }

# -- PostgreSQL subchart deployment
# </br> Ref: https://github.com/bitnami/charts/blob/main/bitnami/postgresql/values.yaml
postgresql:
    # -- Enable or disable PostgreSQL subchart
  enabled: false

  # Number of PostgreSQL replicas to deploy
  replicaCount: 1

  # PostgreSQL Authentication parameters
  auth:
    # PostgreSQL application username
    # </br> Ref: https://github.com/bitnami/containers/tree/main/bitnami/postgresql#environment-variables
    username: user
    # PostgreSQL application password
    # </br> Ref: https://github.com/bitnami/containers/tree/main/bitnami/postgresql#environment-variables
    password: ChangeMe
    # PostgreSQL application database
    # </br> Ref: https://github.com/bitnami/containers/tree/main/bitnami/postgresql#environment-variables
    database: "kdl"

  # Enable persistence using Persistent Volume Claims
  primary:
    # Persistence parameters
    persistence:
      # Enable PostgreSQL data persistence using PVC
      enabled: false

# -- project-operator operator
projectOperator:
  # -- Enable or disable project-operator
  enabled: true

  # -- Image registry
  # The image configuration for the base service
  image:
    # The repository of the image
    repository: konstellation/kdl-project-operator
    # The pull policy for the image
    pullPolicy: IfNotPresent
    # The image tag
    tag: "0.21.0"

  # -- Specifies the secrets to use for pulling images from private registries
  # Leave empty if no secrets are required
  # E.g.
  # imagePullSecrets:
  #   - name: myRegistryKeySecretName
  imagePullSecrets: []

  # -- Enable creation of ServiceAccount
  # </br> Ref: https://kubernetes.io/docs/concepts/security/service-accounts/
  serviceAccount:
    # Specifies whether a service account should be created
    create: true
    # Automatically mount a ServiceAccount's API credentials?
    automount: true
    # Annotations to add to the service account
    annotations: {}
    # The name of the service account to use
    # If not set and create is true, a name is generated using the fullname template
    name: ""

  # -- Configure additional containers
  # </br> Ref: https://kubernetes.io/docs/concepts/workloads/pods/init-containers/
  initContainers: []
    # - name: my-container
    #   image: busybox
    #   command: ['sh', '-c', 'echo "Hello, World!"']

  # -- Configure args
  # </br> Ref: https://kubernetes.io/docs/tasks/inject-data-application/define-command-argument-container/
  args:
    - --enable-http2
    - --health-probe-bind-address=:8081
    - --leader-elect
    - --leader-election-id=project-operator
    - --metrics-bind-address=:8080
    - --zap-log-level=error
    - --zap-stacktrace-level=error

  # -- Configure command
  # </br> Ref: https://kubernetes.io/docs/tasks/inject-data-application/define-command-argument-container/
  command: []
    # - echo
    # - "Hello, World!"

  # -- Kubernetes service to expose Pod
  # </br> Ref: https://kubernetes.io/docs/concepts/services-networking/service/
  service:
    # -- Kubernetes Service type. Allowed values: NodePort, LoadBalancer or ClusterIP
    type: ClusterIP
    # -- Kubernetes Service port
    port: 8081
    # -- Kubernetes Service health check path
    # healthPath: ""
    # -- NodePort port (only when type is NodePort)
    # nodePort: 32000
    # -- Pod expose port
    targetPort: 8081
    # -- Pod extra ports
    extraPorts:
    - name: metrics
      port: 8080
      targetPort: 8080

  # -- Enable ServiceMonitor to get metrics
  # </br> Ref: https://github.com/prometheus-operator/prometheus-operator/blob/main/Documentation/api.md#servicemonitor
  serviceMonitor:
    # -- Enable or disable
    enabled: false
    interval: 30s
    scrapeTimeout: 10s
    metricRelabelings: []
    relabelings: []

  # -- Configure lifecycle hooks
  # </br> Ref: https://kubernetes.io/docs/concepts/containers/container-lifecycle-hooks/
  # </br> Ref: https://learnk8s.io/graceful-shutdown
  lifecycle: {}
    # preStop:
    #   exec:
    #     command: ["sh", "-c", "sleep 10"]
    # postStart:
    #   exec:
    #     command:
    #       - "/bin/sh"
    #       - "-c"
    #       - "ssh-keyscan -H keycloak >> /app/.ssh/known_hosts"

  # -- Configure Pod termination grace period
  # </br> Ref: https://kubernetes.io/docs/concepts/workloads/pods/pod-lifecycle/#pod-termination
  terminationGracePeriodSeconds: 30

  # -- Configure annotations on Pods
  podAnnotations: {}

  # -- Configure labels on Pods
  podLabels: {}

  # -- Defines privilege and access control settings for a Pod
  # </br> Ref: https://kubernetes.io/docs/concepts/security/pod-security-standards/
  # </br> Ref: https://kubernetes.io/docs/tasks/configure-pod-container/security-context/
  podSecurityContext: {}
    # fsGroup: 2000

  # -- Defines privilege and access control settings for a Container
  # </br> Ref: https://kubernetes.io/docs/concepts/security/pod-security-standards/
  # </br> Ref: https://kubernetes.io/docs/tasks/configure-pod-container/security-context/
  securityContext:
    # capabilities:
    #   drop:
    #   - ALL
    # readOnlyRootFilesystem: true
    allowPrivilegeEscalation: false
    runAsNonRoot: true
    # runAsUser: 1000

  # -- Resources limits and requested
  # </br> Ref: https://kubernetes.io/docs/concepts/configuration/manage-resources-containers/
  resources: {}
    # limits:
    #   cpu: 100m
    #   memory: 128Mi
    # requests:
    #   cpu: 100m
    #   memory: 128Mi

  # -- Pod Disruption Budget
  # </br> Ref: https://kubernetes.io/docs/reference/kubernetes-api/policy-resources/pod-disruption-budget-v1/
  podDisruptionBudget:
    enabled: false
    maxUnavailable: 1
    minAvailable:

  # -- Autoscaling with CPU or memory utilization percentage
  # </br> Ref: https://kubernetes.io/docs/tasks/run-application/horizontal-pod-autoscale/
  autoscaling:
    enabled: false
    minReplicas: 1
    maxReplicas: 100
    targetCPUUtilizationPercentage: 80
    # targetMemoryUtilizationPercentage: 80

  # -- Node labels for pod assignment
  # </br> Ref: https://kubernetes.io/docs/concepts/scheduling-eviction/assign-pod-node/#nodeselector
  nodeSelector: {}

  # -- Tolerations for pod assignment
  # </br> Ref: https://kubernetes.io/docs/concepts/scheduling-eviction/taint-and-toleration/
  tolerations: []

  # -- Affinity for pod assignment
  # </br> Ref: https://kubernetes.io/docs/concepts/scheduling-eviction/assign-pod-node/#affinity-and-anti-affinity
  affinity: {}

  # -- Control how Pods are spread across your cluster
  # </br> Ref: https://kubernetes.io/docs/concepts/scheduling-eviction/topology-spread-constraints/#example-multiple-topologyspreadconstraints
  topologySpreadConstraints: []
  # - maxSkew: 1
  #   topologyKey: zone
  #   whenUnsatisfiable: DoNotSchedule

  ### Following values are used to configure the Project Operator
  ### This config pass on ConfigMap to KDL API create Project CRD with the
  ### desired configuration.
  # ref: https://github.com/konstellation-io/kdl-server/blob/main/project-operator/helm-charts/kdl-project/values.yaml
  templateCustomResource:
    apiVersion: kdl.konstellation.io/v1
    kind: KDLProject
    metadata:
      name: replaced-by-kdl-api
      namespace: replaced-by-kdl-api
    spec:
      projectId: replaced-by-kdl-api
      domain: kdl.local

      mlflow:
        image:
          repository: konstellation/kdl-mlflow
          pullPolicy: IfNotPresent
          tag: "0.15.0"

        ingress:
          enabled: false
          tls:
            enabled: true
          className: "replace-class-name"
          annotations: {}
            # cert-manager.io/cluster-issuer: selfsigned-clusterissuer
            # nginx.ingress.kubernetes.io/proxy-body-size: "4096m"

        persistentVolume:
          enabled: true
          size: "1Gi"
          accessModes:
            - ReadWriteOnce
          storageClass: "replace-storage-class-name"

        env:
          AWS_ACCESS_KEY_ID: "replace-minio-access-key"
          AWS_SECRET_ACCESS_KEY: "replace-minio-secret-access-key"
          MLFLOW_BACKEND_STORE_URI: "sqlite:////mlflow/tracking/mlflow.db"
          MLFLOW_S3_ENDPOINT_URL: "http://minio:9000"

      filebrowser:
        image:
          repository: konstellation/kdl-filebrowser
          pullPolicy: IfNotPresent
          tag: "1.0.0"

        podSecurityContext:
          fsGroup: 1000

        securityContext:
          privileged: true
          capabilities:
            add:
              - SYS_ADMIN

        env:
          AWS_S3_ACCESS_KEY_ID: "replace-minio-access-key"
          AWS_S3_MOUNT: "/srv"
          AWS_S3_SECRET_ACCESS_KEY: "replace-minio-secret-access-key"
          AWS_S3_URL: "http://minio:9000"
          FB_ADDRESS: "0.0.0.0"
          FB_DATABASE: "/home/filebrowser/database.db"
          FB_LOG: stdout
          FB_ROOT: /srv
          S3FS_ARGS: >-
            -o use_path_request_style
            -o use_cache=/cache
            -o ensure_diskfree=2048
            -o max_stat_cache_size=100000
            -o stat_cache_expire=300
            -o enable_noobj_cache
            -o dbglevel=warn
            -o multipart_size=52
            -o parallel_count=32
            -o max_dirty_data=512
            -o multireq_max=30
            -o complement_stat
            -o notsup_compat_dir
            -o enable_content_md5
            -o ro

        volumes:
          - name: cache-volume
            emptyDir: {}
          - name: fuse-device
            hostPath:
              path: /dev/fuse
              type: CharDevice

        volumeMounts:
          - name: cache-volume
            mountPath: /cache
          - name: fuse-device
            mountPath: /dev/fuse

# -- Shared Volume configuration
# Mount volume to share data between components
# </br> Ref: https://kubernetes.io/docs/concepts/storage/persistent-volumes/
sharedVolume:
  # -- Enable or disable persistence
  enabled: false

  # -- Name of the shared volume
  # name: received-data

  # -- Persistent Volume access modes
  # Must match those of existing PV or dynamic provisioner
  # </br> Ref: http://kubernetes.io/docs/user-guide/persistent-volumes/
  accessModes:
    - ReadWriteMany

  # -- Persistent Volume annotations
  annotations: {}

  # -- Persistent Volume labels
  labels: {}

  # -- Persistent Volume size
  size: 10Gi

  # -- Persistent Volume Storage Class
  # If defined, storageClassName: <storageClass>
  # If set to "-", storageClassName: "", which disables dynamic provisioning
  # If undefined (the default) or set to null, no storageClassName spec is
  #   set, choosing the default provisioner.  (gp2 on AWS, standard on
  #   GKE, AWS & OpenStack)
  storageClassName: ""

  # -- Persistent Volume Binding Mode
  # If defined, volumeBindingMode: <volumeBindingMode>
  # If undefined (the default) or set to null, no volumeBindingMode spec is
  # set, choosing the default mode.
  volumeBindingMode: ""

  # -- Persistent Volume Claim Selector
  # Useful if Persistent Volumes have been provisioned in advance
  # </br> Ref: https://kubernetes.io/docs/concepts/storage/persistent-volumes/#selector
  selector: {}
    # matchLabels:
    #   release: "stable"
    # matchExpressions:
    #   - { key: environment, operator: In, values: [ dev ] }

  # -- Persistent Volume Name
  # Useful if Persistent Volumes have been provisioned in advance and you want to use a specific one
  volumeName: ""

# -- User Tools Operator deployment
# ref: https://github.com/konstellation-io/kdl-server/tree/main/user-tools-operator
userToolsOperator:
  # -- Enable or disable User Tools Operator deployment
  enabled: true

  # -- Image registry
  # The image configuration for the base service
  image:
    # The repository of the image
    repository: konstellation/kdl-user-tools-operator
    # The pull policy for the image
    pullPolicy: IfNotPresent
    # The image tag
    tag: "0.32.1"

  # -- Specifies the secrets to use for pulling images from private registries
  # Leave empty if no secrets are required
  # E.g.
  # imagePullSecrets:
  #   - name: myRegistryKeySecretName
  imagePullSecrets: []

  # -- Enable creation of ServiceAccount
  # </br> Ref: https://kubernetes.io/docs/concepts/security/service-accounts/
  serviceAccount:
    # Specifies whether a service account should be created
    create: true
    # Automatically mount a ServiceAccount's API credentials?
    automount: true
    # Annotations to add to the service account
    annotations: {}
    # The name of the service account to use
    # If not set and create is true, a name is generated using the fullname template
    name: ""

  # -- Configure additional containers
  # </br> Ref: https://kubernetes.io/docs/concepts/workloads/pods/init-containers/
  initContainers: []
    # - name: my-container
    #   image: busybox
    #   command: ['sh', '-c', 'echo "Hello, World!"']

  # -- Configure args
  # </br> Ref: https://kubernetes.io/docs/tasks/inject-data-application/define-command-argument-container/
  args:
    - --enable-http2
    - --health-probe-bind-address=:8081
    - --leader-elect
    - --leader-election-id=user-tools-operator
    - --metrics-bind-address=:8080
    - --zap-log-level=error
    - --zap-stacktrace-level=error

  # -- Configure command
  # </br> Ref: https://kubernetes.io/docs/tasks/inject-data-application/define-command-argument-container/
  command: []
    # - echo
    # - "Hello, World!"

  # -- Kubernetes service to expose Pod
  # </br> Ref: https://kubernetes.io/docs/concepts/services-networking/service/
  service:
    # -- Kubernetes Service type. Allowed values: NodePort, LoadBalancer or ClusterIP
    type: ClusterIP
    # -- Kubernetes Service port
    port: 8081
    # -- Kubernetes Service health check path
    # healthPath: ""
    # -- NodePort port (only when type is NodePort)
    # nodePort: 32000
    # -- Pod expose port
    targetPort: 8081
    # -- Pod extra ports
    extraPorts:
    - name: metrics
      port: 8080
      targetPort: 8080

  # -- Enable ServiceMonitor to get metrics
  # </br> Ref: https://github.com/prometheus-operator/prometheus-operator/blob/main/Documentation/api.md#servicemonitor
  serviceMonitor:
    # -- Enable or disable
    enabled: false
    interval: 30s
    scrapeTimeout: 10s
    metricRelabelings: []
    relabelings: []

  # -- Configure lifecycle hooks
  # </br> Ref: https://kubernetes.io/docs/concepts/containers/container-lifecycle-hooks/
  # </br> Ref: https://learnk8s.io/graceful-shutdown
  lifecycle: {}
    # preStop:
    #   exec:
    #     command: ["sh", "-c", "sleep 10"]
    # postStart:
    #   exec:
    #     command:
    #       - "/bin/sh"
    #       - "-c"
    #       - "ssh-keyscan -H keycloak >> /app/.ssh/known_hosts"

  # -- Configure Pod termination grace period
  # </br> Ref: https://kubernetes.io/docs/concepts/workloads/pods/pod-lifecycle/#pod-termination
  terminationGracePeriodSeconds: 30

  # -- Configure annotations on Pods
  podAnnotations: {}

  # -- Configure labels on Pods
  podLabels: {}

  # -- Defines privilege and access control settings for a Pod
  # </br> Ref: https://kubernetes.io/docs/concepts/security/pod-security-standards/
  # </br> Ref: https://kubernetes.io/docs/tasks/configure-pod-container/security-context/
  podSecurityContext: {}
    # fsGroup: 2000

  # -- Defines privilege and access control settings for a Container
  # </br> Ref: https://kubernetes.io/docs/concepts/security/pod-security-standards/
  # </br> Ref: https://kubernetes.io/docs/tasks/configure-pod-container/security-context/
  securityContext: {}
    # capabilities:
    #   drop:
    #   - ALL
    # readOnlyRootFilesystem: true
    # runAsNonRoot: true
    # runAsUser: 1000

  # -- Resources limits and requested
  # </br> Ref: https://kubernetes.io/docs/concepts/configuration/manage-resources-containers/
  resources: {}
    # limits:
    #   cpu: 100m
    #   memory: 128Mi
    # requests:
    #   cpu: 100m
    #   memory: 128Mi

  # -- Pod Disruption Budget
  # </br> Ref: https://kubernetes.io/docs/reference/kubernetes-api/policy-resources/pod-disruption-budget-v1/
  podDisruptionBudget:
    enabled: false
    maxUnavailable: 1
    minAvailable:

  # -- Autoscaling with CPU or memory utilization percentage
  # </br> Ref: https://kubernetes.io/docs/tasks/run-application/horizontal-pod-autoscale/
  autoscaling:
    enabled: false
    minReplicas: 1
    maxReplicas: 100
    targetCPUUtilizationPercentage: 80
    # targetMemoryUtilizationPercentage: 80

  # -- Node labels for pod assignment
  # </br> Ref: https://kubernetes.io/docs/concepts/scheduling-eviction/assign-pod-node/#nodeselector
  nodeSelector: {}

  # -- Tolerations for pod assignment
  # </br> Ref: https://kubernetes.io/docs/concepts/scheduling-eviction/taint-and-toleration/
  tolerations: []

  # -- Affinity for pod assignment
  # </br> Ref: https://kubernetes.io/docs/concepts/scheduling-eviction/assign-pod-node/#affinity-and-anti-affinity
  affinity: {}

  # -- Control how Pods are spread across your cluster
  # </br> Ref: https://kubernetes.io/docs/concepts/scheduling-eviction/topology-spread-constraints/#example-multiple-topologyspreadconstraints
  topologySpreadConstraints: []
  # - maxSkew: 1
  #   topologyKey: zone
  #   whenUnsatisfiable: DoNotSchedule

  ### Following values are used to configure the User Tools Operator
  ### This config pass on ConfigMap to KDL API create UserTools CRD with the
  ### desired configuration.
  # </br> Ref: https://github.com/konstellation-io/kdl-server/blob/main/user-tools-operator/helm-charts/kdl-user-tools/values.yaml
  templateCustomResource:
    apiVersion: kdl.konstellation.io/v1
    kind: KDLUserTools
    metadata:
      name: replaced-by-kdl-api
      namespace: replaced-by-kdl-api
    spec:
      username: replaced-by-kdl-api
      usernameSlug: replaced-by-kdl-api

      # must be declared
      podLabels: {}

      persistentVolume:
        enabled: true
        size: "1Gi"
        accessModes:
          - ReadWriteOnce
        storageClass: ""

      kubeconfig:
        enabled: false
        # externalServerUrl: https://192.168.0.21:16443

      repoCloner:
        image:
          repository: konstellation/kdl-repo-cloner
          pullPolicy: IfNotPresent
          tag: "0.20.0"

        # ref: https://github.com/konstellation-io/kdl-server/tree/main/repo-cloner
        env: {}
          # KDL_SERVER_MONGODB_URI: "mongodb://kdl:123456@mongodb-svc.mongodb:27017/kdl?authSource=kdl&authMechanism=SCRAM-SHA-256"

      # must be declared
      vscodeRuntime:
        image:
          repository: konstellation/kdl-py
          pullPolicy: IfNotPresent
          tag: "3.9"

        env: {}
          # MINIO_ACCESS_KEY: ""
          # MINIO_SECRET_KEY: ""
          # MINIO_ENDPOINT: "http://minio:9000"

      # must be declared
      nodeSelector: {}
      tolerations: []
      affinity: {}
